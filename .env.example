# .env

# ===============================================
# CONFIGURACIÓN DEL SERVIDOR
# ===============================================
SERVER_TYPE=http
SERVER_PORT=8080
SERVER_URL=http://localhost:8080
CORS_ORIGIN=*
CORS_METHODS=GET,POST,PUT,DELETE
CORS_CREDENTIALS=true
LOG_LEVEL=ERROR,WARN,INFO,LOG,WEBHOOKS
LOG_COLOR=true
LOG_BAILEYS=error
EVENT_EMITTER_MAX_LISTENERS=50
DEL_INSTANCE=false

# ===============================================
# CONFIGURACIÓN DE AUTENTICACIÓN
# ===============================================
# Define una apikey global para acceder a todas las instancias.
AUTHENTICATION_API_KEY=123654FFFasdf789
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=true
LANGUAGE=en

# ===============================================
# CONFIGURACIÓN DE BASE DE DATOS Y CACHE
# ===============================================
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI='postgresql://user:pass@postgres:5432/evolution_db?schema=evolution_api'
DATABASE_CONNECTION_CLIENT_NAME=evolution_exchange
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true
DATABASE_SAVE_DATA_LABELS=true
DATABASE_SAVE_DATA_HISTORIC=true
DATABASE_SAVE_IS_ON_WHATSAPP=true
DATABASE_SAVE_IS_ON_WHATSAPP_DAYS=7
DATABASE_DELETE_MESSAGE=true

CACHE_REDIS_ENABLED=true
# CORREGIDO: Usar el nombre del servicio 'redis' en lugar de 'localhost'
CACHE_REDIS_URI=redis://redis:6379/6
CACHE_REDIS_TTL=604800
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=false
CACHE_LOCAL_ENABLED=false

# ===============================================
# CONFIGURACIÓN DE WEBHOOKS PARA N8N
# ===============================================
# Habilitar el envío de webhooks globales
WEBHOOK_GLOBAL_ENABLED=true
# URL a la que Evolution API enviará los eventos.
# Usamos el nombre del servicio 'n8n' porque están en la misma red Docker.
WEBHOOK_GLOBAL_URL='http://n8n:5678/webhook/evolution-events'
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=false
# Eventos que queremos recibir en n8n
WEBHOOK_EVENTS_APPLICATION_STARTUP=false
WEBHOOK_EVENTS_QRCODE_UPDATED=true
WEBHOOK_EVENTS_MESSAGES_UPSERT=true
WEBHOOK_EVENTS_MESSAGES_UPDATE=true
WEBHOOK_EVENTS_MESSAGES_DELETE=true
WEBHOOK_EVENTS_CONNECTION_UPDATE=true
WEBHOOK_EVENTS_CALL=true

# ===============================================
# CONFIGURACIÓN GENERAL DE N8N
# ===============================================
# Tu zona horaria. Encuéntrala en: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=America/Argentina/Buenos_Aires

# LLAVE DE CIFRADO PARA N8N - ¡MUY IMPORTANTE!
# Esta clave se usa para cifrar tus credenciales (tokens, contraseñas, etc.).
# DEBES establecer una clave aleatoria y segura de 32 caracteres. Guárdala bien.
# Puedes generar una en la terminal con: openssl rand -hex 16
N8N_ENCRYPTION_KEY=ReemplazaEstoConUnaClaveAleatoriaMuySeguraDe32Chars